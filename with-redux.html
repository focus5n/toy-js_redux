<!DOCTYPE html>
<html lang="ko-KR">

<head>
  <meta charset="UTF-8">
  <title>with-redux</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.js"></script>
</head>

<body>
<style>
  .container {
    border: 5px solid darkred;
    padding: 10px;
    margin: 10px;
  }
</style>

<div id="red"></div>
<div id="blue"></div>
<div id="green"></div>

<script>
  const store = Redux.createStore(reducer);

  function reducer(state, action) {
    if (state === undefined) {
      return {color: 'antiquewhite'}
    }

    let newState = {};

    if (action.type === 'CHANGE_COLOR') {
      newState = Object.assign({}, state, {color: action.color});
    }

    return newState;
  }

  function red() {
    let state = store.getState();
    document.querySelector('#red').innerHTML = `
                <div class="container" id="component_red" style="background-color: ${state.color}">
                    <h1>RED</h1>
                    <input type="button" value="change all" onclick="
                        store.dispatch({type: 'CHANGE_COLOR', color: 'crimson'});
                    ">
                </div>
            `;
  }
  store.subscribe(red);
  red();

  function blue() {
    let state = store.getState();
    document.querySelector('#blue').innerHTML = `
                <div class="container" id="component_red" style="background-color: ${state.color}">
                    <h1>BLUE</h1>
                    <input type="button" value="change all" onclick="
                        store.dispatch({type: 'CHANGE_COLOR', color: 'blueviolet'});
                    ">
                </div>
            `;
  }
  store.subscribe(blue);
  blue();

  function green() {
    let state = store.getState();
    document.querySelector('#green').innerHTML = `
                <div class="container" id="component_red" style="background-color: ${state.color}">
                    <h1>GREEN</h1>
                    <input type="button" value="change all" onclick="
                        store.dispatch({type: 'CHANGE_COLOR', color: 'burlywood'});
                    ">
                </div>
            `;
  }
  store.subscribe(green);
  green();

</script>
</body>
</html>